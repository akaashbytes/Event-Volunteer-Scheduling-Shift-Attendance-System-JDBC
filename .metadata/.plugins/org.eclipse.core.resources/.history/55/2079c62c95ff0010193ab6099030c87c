package com.eventvol.app;

import com.eventvol.bean.Shift;
import com.eventvol.bean.Volunteer;
import com.eventvol.service.EventService;
import com.eventvol.util.OverlappingShiftAssignmentException;
import com.eventvol.util.ValidationException;

public class EventMain
{
	private static EventService eventService;
       public static void main(String[] args) {
         eventService = new EventService();
         java.util.Scanner sc = new java.util.Scanner(System.in);
         System.out.println("--- Event Volunteer Scheduling Console ---");
// DEMO 1: Register a volunteer
       try {
        Volunteer v = new Volunteer();
        v.setVolunteerID("VOL2045");
        v.setFullName("RK Akaash");
        v.setSkillCategory("REGISTRATION");
        v.setPrimaryPhone("9876543210");
        v.setEmail("meera.krishnan@example.com");
        v.setStatus("ACTIVE");
        
        boolean ok = eventService.registerNewVolunteer(v);
        System.out.println(ok ? "VOLUNTEER REGISTERED" :"VOLUNTEER REGISTRATION FAILED");
        } catch (ValidationException e) {
        System.out.println("Validation Error: " + e.toString());
        } catch (Exception e) {
        System.out.println("System Error: " + e.getMessage());
        } 
// DEMO 2: Create a new shift
       try {
        Shift s = new Shift();
        s.setShiftID(410025);
        s.setShiftDate(new java.sql.Date(System.currentTimeMillis()));
        s.setStartTime("09:00");
        s.setEndTime("09:00");
        s.setLocation("C_BLOCKS");
        s.setRequiredHeadcount(5);
        s.setStatus("OPEN_FOR_ASSIGNMENT");
        
        boolean ok = eventService.createShift(s);
        System.out.println(ok ? "SHIFT CREATED" : "SHIFT CREATION FAILED");
        } catch (ValidationException e) {
        System.out.println("Validation Error: " +e.toString());
        } catch (Exception e) {
        System.out.println("System Error: " + e.getMessage());
        }
// DEMO 3: Assign volunteer to shift
       try {
        boolean ok = eventService.assignVolunteerToShift("VOL2045", 410025,"ENTRY_CHECK");
        System.out.println(ok ? "ASSIGNMENT CREATED" :"ASSIGNMENT FAILED");
        } catch (OverlappingShiftAssignmentException e) {
        System.out.println("Assignment Error: " + e.toString());
        } catch (ValidationException e) {
        System.out.println("Validation Error: " +e.toString());
        } catch (Exception e) {
        System.out.println("System Error: " + e.getMessage());
        }
       
    // DEMO 4: Mark attendance for assignment
       try {
           int assignmentID = 620060; // replace with actual assignment ID from DB
           boolean ok = eventService.markAttendance(
                   assignmentID,
                   "PRESENT",
                   "08:55",
                   "13:05"
           );
           System.out.println(ok ? 
               "ATTENDANCE MARKED SUCCESSFULLY" : 
               "ATTENDANCE UPDATE FAILED");

       } catch (ValidationException e) {
           System.out.println("Validation Error: " + e.toString());
       } catch (Exception e) {
           System.out.println("System Error: " + e.getMessage());
       }

       
    sc.close();
  }
}